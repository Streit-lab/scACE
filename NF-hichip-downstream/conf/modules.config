/*
========================================================================================
    Config file for defining DSL2 per module options and publishing paths
========================================================================================
    Available keys to override module options:
        ext.args            = Additional arguments appended to command in module.
        ext.args2           = Second set of arguments appended to command in module (multi-tool modules).
        ext.args3           = Third set of arguments appended to command in module (multi-tool modules).
        ext.prefix          = File name prefix for output files.
----------------------------------------------------------------------------------------
*/


process {

    // Bash script to edit validpairs files
    withName: EDIT_VALIDPAIRS {
        cpus = { check_max( 8, 'cpus' ) }
        memory = { check_max( 36.GB, 'memory' ) }
        time = { check_max( 4.h, 'time' ) }
        publishDir = [
            path: { "${params.outdir}/edit_validpairs" },
            mode: 'copy']
    }

    // Bash script to turn gtf into bed file
    withName: GTF_TO_BED {
        cpus = { check_max( 8, 'cpus' ) }
        memory = { check_max( 36.GB, 'memory' ) }
        time = { check_max( 4.h, 'time' ) }
        publishDir = [
            path: { "${params.outdir}/genes_bed" },
            mode: 'copy']
    }

    // R script to generate bins
    withName: GENERATE_BINS {
        cpus = { check_max( 8, 'cpus' ) }
        memory = { check_max( 36.GB, 'memory' ) }
        time = { check_max( 4.h, 'time' ) }
        publishDir = [
            path: { "${params.outdir}/bins" },
            mode: 'copy']
        container = "alexthiery/archr_hicdc:3.0"
    }

    }
